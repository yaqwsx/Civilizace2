{% extends "game/base.html" %}
{% load crispy_forms_tags qrScanner %}

{% block title %} Příběh civilizace - Vývěska {% endblock %}

{% block content %}
    <h1>Vývěska</h1>
    <a href="{% url 'messageBoardNew' %}">
        <button class="w-full shadow bg-purple-500 hover:bg-purple-400 focus:shadow-outline focus:outline-none text-white font-bold py-2 px-4 rounded">
            Nová zpráva
        </button>
    </a>
    {% for message in boardMessages %}
    <div class="w-full my-4 p-5 bg-gray-300 rounded">
        <p class="w-full my-3">
            {{ message.content | safe}}
        </p>
        <p>
            Viditelná od: {{message.appearDateTime}}
        </p>
        <p>
            Vidí ji:
            {% for messageStatus in message.allowedTeams %}
                {{messageStatus.team.name}}
                {% if not forloop.last %}
                    ,
                {% endif %}
            {% endfor %}
        </p>
        <p>
            Naposledy upravil: {{message.author.first_name}} {{message.author.last_name}} ({{message.author.username}})
        </p>
        <div class="flex flex-wrap w-full my-2">
            <a href="{% url "messageBoardDelete" message.id %}" class="w-full md:w-1/3 px-2" >
                <button class="w-full shadow bg-red-500 hover:bg-red-400 focus:shadow-outline focus:outline-none text-white font-bold py-2 px-4 rounded">
                    Smazat
                </button>
            </a>
            <a href="{% url "messageBoardEdit" message.id %}" class="w-full md:w-2/3 px-2" >
                <button class="w-full shadow bg-purple-500 hover:bg-purple-400 focus:shadow-outline focus:outline-none text-white font-bold py-2 px-4 rounded">
                    Upravit
                </button>
            </a>
        </div>
    </div>
    {% endfor %}
{% endblock %}
